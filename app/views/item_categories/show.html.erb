<% if @item_category.items.empty?
  # this is a category that contains other categories
  %>
  <div class='grid'>
  
    <%= link_to item_categories_path do %>
      <span class='three-grid'>
        <h1>&lt;&lt; Back</h1>
        <h2><%= pluralize ItemCategory.parent_categories.count, "Category" %></h2>
      </span>
    <% end %>
  
    <% for item_category in @item_category.item_subcategories %>
      <%= render "as_grid_link", :object => item_category %>
    <% end %>
  
  </div>

<% else
  # this is a category that contains items
  %>
  
  <div class='grid'>
  
    <%= link_to item_categories_path do %>
      <span class='three-grid'>
        <h1>&lt;&lt; Beginning</h1>
        <h2><%= pluralize ItemCategory.parent_categories.count, "Category" %></h2>
      </span>
    <% end %>
  
    <%= link_to @item_category.parent_category do %>
      <span class='three-grid'>
        <h1>&lt; <%= @item_category.parent_category.slug or @item_category.parent_category.prefix %> <%= @item_category.parent_category %></h1>
        <h2><%= pluralize @item_category.parent_category.num_items, "Item" %></h2>
      </span>
    <% end %>
  
    <span>
      <span class='three-grid-no-link'>
        <h1><%= @item_category.slug or @item_category.prefix %> <%= @item_category %></h1>
        <h2>
          <%= pluralize @item_category.num_items, "Item" %>
        </h2>
      </span>
    </span>
  
  </div>
  
  <% unless @item_category.items.empty? %>
  <article>
    <h1>Items in this Category</h1>
    <table>
      <tr>
        <th>Catalog #</th>
        <th>Name</th>
        <th>Location</th>
        <th></th>
      </tr>

    <% @item_category.items.each do |item| %>
      <tr>
        <td><%= item.catalog_number %></td>
        <td><%= item.shortname %></td>
        <td><%= item.location %></td>
        <td><%= link_to 'View Item', item %> |
        <% if item.available? %>
        <%= link_to 'Check Out', new_item_checkout_path(item) %>
        <% else %>
        Unavailable
        <% end %></td>
      </tr>
    <% end %>
    </table>
  </article>
  <% end %>
  
<% end %>
