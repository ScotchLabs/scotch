<% if @item_subcategories
  # this is a category that contains other categories
  %>

  <%= @item_category %>
  <% if has_global_permission? "adminItemCategories" %> 
    (<%= link_to image_tag("edit_icon.png", :size => "10x10")+'Edit', edit_item_category_path(@item_category) %>)
  <% end %>
  <br><br>

  <div class='grid'>
    
    <% for item_category in @item_subcategories %>
      <%= render "as_grid_item", :object => item_category, :link => true %>
    <% end %>
  
  </div>

<% else
  # this is a category that contains items
  %>
  
  <%= link_to @item_category.parent_category, @item_category.parent_category %> &gt;
  <%= @item_category %>
  <% if has_global_permission? "adminItemCategories" %> 
    (<%= link_to image_tag("edit_icon.png", :size => "10x10")+'Edit', edit_item_category_path(@item_category) %>)
  <% end %>
  <br><br>
  
  <% unless @item_category.items.empty? %>
  <article>
  <% for item in @item_category.items %>
    <%= render "items/as_line_item", :object => item %>
  <% end %>
  </article>
  <% end %>
  
<% end %>
